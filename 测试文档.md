# BadgePatternTool 功能测试文档

## 📋 测试概述

本文档提供了BadgePatternTool的完整功能测试指南，帮助验证所有核心功能是否正常工作。

### 🎯 测试目标
- 验证完整的工作流程：导入 → 编辑 → 排版 → 导出
- 确保所有界面功能正常响应
- 验证输出文件质量和准确性
- 测试错误处理和边界情况

---

## 🚀 测试准备

### 环境要求
- Windows 7/8/10/11
- Python 3.8+
- 已安装依赖：`pip install -r requirements.txt`

### 测试素材准备
请准备以下测试图片（建议放在桌面或易访问的文件夹）：

1. **标准测试图片**：
   - 2-3张JPG格式图片（不同尺寸：如500x500, 800x600, 1200x800）
   - 2-3张PNG格式图片（包含透明背景的）
   - 1张较大的图片（>2MB）
   - 1张较小的图片（<100KB）

2. **特殊测试图片**：
   - 1张正方形图片（1:1比例）
   - 1张长方形图片（16:9比例）
   - 1张竖向图片（3:4比例）

---

## 📝 详细测试步骤

### 第一阶段：基础功能测试

#### 1.1 程序启动测试
```bash
cd BadgePatternTool
python src/main.py
```

**预期结果**：
- ✅ 程序正常启动，无错误信息
- ✅ 主窗口显示，包含三个区域：图片列表、编辑预览区、参数面板
- ✅ 菜单栏显示：文件、编辑、视图、帮助
- ✅ 状态栏显示"就绪"

#### 1.2 界面响应测试
**操作步骤**：
1. 调整窗口大小
2. 点击各个菜单项
3. 切换"单图编辑"和"A4排版预览"标签页

**预期结果**：
- ✅ 窗口可以正常调整大小
- ✅ 界面元素自适应调整
- ✅ 菜单项可以正常点击（显示提示信息）
- ✅ 标签页可以正常切换

### 第二阶段：图片导入测试

#### 2.1 正常导入测试
**操作步骤**：
1. 点击"导入图片"按钮
2. 选择2-3张不同格式的图片（JPG、PNG）
3. 点击"打开"

**预期结果**：
- ✅ 文件选择对话框正常打开
- ✅ 可以多选图片文件
- ✅ 图片成功导入到左侧列表
- ✅ 显示图片文件名和尺寸信息
- ✅ 状态栏显示导入成功信息
- ✅ A4排版预览自动更新

#### 2.2 格式验证测试
**操作步骤**：
1. 尝试导入不支持的格式（如.txt、.doc文件）
2. 尝试导入损坏的图片文件

**预期结果**：
- ✅ 不支持的格式被过滤掉
- ✅ 显示格式警告信息
- ✅ 只有有效图片被导入

#### 2.3 重复导入测试
**操作步骤**：
1. 导入相同的图片文件两次

**预期结果**：
- ✅ 重复的图片不会被重复添加
- ✅ 状态栏显示相应提示

#### 2.4 图片管理测试
**操作步骤**：
1. 选择列表中的图片项
2. 点击"删除"按钮
3. 点击"清空"按钮

**预期结果**：
- ✅ 选中的图片可以被删除
- ✅ 清空功能显示确认对话框
- ✅ 清空后列表为空，预览区显示提示

### 第三阶段：图片编辑测试

#### 3.1 基础编辑测试
**操作步骤**：
1. 导入一张图片
2. 在图片列表中选择该图片
3. 切换到"单图编辑"标签页
4. 观察预览区域

**预期结果**：
- ✅ 选中图片后，编辑区显示圆形预览
- ✅ 右侧显示编辑控制面板
- ✅ 缩放滑块默认值合理
- ✅ 位置偏移滑块为0

#### 3.2 缩放功能测试
**操作步骤**：
1. 调整缩放滑块从0.1到3.0
2. 观察预览变化

**预期结果**：
- ✅ 预览图片实时缩放
- ✅ 缩放范围合理（0.1-3.0）
- ✅ 预览更新流畅

#### 3.3 位置调整测试
**操作步骤**：
1. 调整X轴偏移滑块（-100到100）
2. 调整Y轴偏移滑块（-100到100）
3. 观察预览变化

**预期结果**：
- ✅ 图片在圆形内实时移动
- ✅ 移动范围合理
- ✅ 预览更新及时

#### 3.4 重置和应用测试
**操作步骤**：
1. 调整缩放和位置参数
2. 点击"重置"按钮
3. 重新调整参数
4. 点击"应用"按钮

**预期结果**：
- ✅ 重置后参数回到最佳值
- ✅ 应用后显示成功提示
- ✅ A4排版预览自动更新

### 第四阶段：A4排版测试

#### 4.1 排版预览测试
**操作步骤**：
1. 导入多张图片（建议5-8张）
2. 对部分图片进行编辑
3. 切换到"A4排版预览"标签页

**预期结果**：
- ✅ 显示A4纸张预览
- ✅ 图片按圆形排列在A4纸上
- ✅ 显示可放置数量和已有数量信息

#### 4.2 布局模式测试
**操作步骤**：
1. 选择"网格排列"模式
2. 观察排版效果
3. 选择"紧密排列"模式
4. 观察排版变化

**预期结果**：
- ✅ 网格模式：图片规整排列
- ✅ 紧密模式：图片密集排列（六边形密排）
- ✅ 切换时预览实时更新

#### 4.3 参数调整测试
**操作步骤**：
1. 调整间距滑块（0-20mm）
2. 调整页边距滑块（5-30mm）
3. 观察排版变化

**预期结果**：
- ✅ 间距调整影响图片间距离
- ✅ 页边距调整影响整体布局
- ✅ 参数变化时预览实时更新
- ✅ 可放置数量信息实时更新

#### 4.4 自动排版测试
**操作步骤**：
1. 导入多张图片但不进行编辑
2. 点击"自动排版"按钮

**预期结果**：
- ✅ 显示处理进度或结果
- ✅ 所有图片自动应用最佳参数
- ✅ 排版预览自动更新
- ✅ 显示处理完成的图片数量

### 第五阶段：导出功能测试

#### 5.1 PDF导出测试
**操作步骤**：
1. 确保有已处理的图片
2. 选择导出格式为"pdf"
3. 点击"导出文件"按钮
4. 选择保存位置和文件名
5. 等待导出完成

**预期结果**：
- ✅ 文件保存对话框正常打开
- ✅ 建议的文件名包含时间戳
- ✅ 导出过程显示进度提示
- ✅ 导出成功显示确认对话框
- ✅ 询问是否打开文件夹
- ✅ 生成的PDF文件可以正常打开
- ✅ PDF中图片位置和大小正确

#### 5.2 图片格式导出测试
**操作步骤**：
1. 分别测试PNG和JPG格式导出
2. 检查生成的图片文件

**预期结果**：
- ✅ PNG文件：高质量，支持透明背景
- ✅ JPG文件：高质量，文件大小合理
- ✅ 图片分辨率为300DPI
- ✅ A4尺寸正确（210×297mm）

#### 5.3 菜单导出测试
**操作步骤**：
1. 使用菜单栏"文件"→"导出PDF"
2. 使用菜单栏"文件"→"导出PNG"

**预期结果**：
- ✅ 菜单导出功能正常工作
- ✅ 与按钮导出结果一致

### 第六阶段：边界情况测试

#### 6.1 空状态测试
**操作步骤**：
1. 在没有导入图片时尝试导出
2. 在没有处理图片时尝试导出

**预期结果**：
- ✅ 显示相应的警告信息
- ✅ 不会崩溃或产生错误文件

#### 6.2 大量图片测试
**操作步骤**：
1. 尝试导入超过50张图片

**预期结果**：
- ✅ 显示数量限制警告
- ✅ 只导入允许的数量

#### 6.3 大文件测试
**操作步骤**：
1. 尝试导入超过10MB的图片

**预期结果**：
- ✅ 显示文件大小警告
- ✅ 大文件被拒绝导入

#### 6.4 错误路径测试
**操作步骤**：
1. 尝试导出到只读文件夹
2. 尝试导出到不存在的路径

**预期结果**：
- ✅ 显示相应的错误信息
- ✅ 程序不会崩溃

---

## 📊 测试结果记录

### 测试检查清单

#### 基础功能 ✅
- [ ] 程序启动正常
- [ ] 界面响应正常
- [ ] 菜单功能正常

#### 图片导入 ✅
- [ ] 正常导入功能
- [ ] 格式验证功能
- [ ] 重复导入处理
- [ ] 图片管理功能

#### 图片编辑 ✅
- [ ] 基础编辑预览
- [ ] 缩放功能
- [ ] 位置调整功能
- [ ] 重置和应用功能

#### A4排版 ✅
- [ ] 排版预览显示
- [ ] 布局模式切换
- [ ] 参数调整功能
- [ ] 自动排版功能

#### 导出功能 ✅
- [ ] PDF导出功能
- [ ] PNG导出功能
- [ ] JPG导出功能
- [ ] 菜单导出功能

#### 边界情况 ✅
- [ ] 空状态处理
- [ ] 大量图片处理
- [ ] 大文件处理
- [ ] 错误路径处理

---

## 🐛 问题报告模板

如果发现问题，请按以下格式记录：

```
问题标题：[简短描述]
重现步骤：
1. 
2. 
3. 

预期结果：
实际结果：
错误信息：
测试环境：
```

---

## ✅ 测试完成标准

当所有测试项目都通过时，说明BadgePatternTool功能正常，可以投入使用。

### 核心验证点
1. **完整工作流程**：能够从导入图片到导出PDF的完整流程
2. **输出质量**：生成的PDF/图片文件质量符合300DPI打印要求
3. **用户体验**：界面响应流畅，操作直观
4. **错误处理**：各种异常情况都有合适的提示和处理

---

*测试文档版本：v1.0*  
*创建时间：2025-06-17*
